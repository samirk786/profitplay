"use strict";(()=>{var e={};e.id=452,e.ids=[452],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},12613:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>_,patchFetch:()=>k,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>P});var s={};t.r(s),t.d(s,{GET:()=>l,POST:()=>d});var a=t(95419),o=t(69108),n=t(99678),p=t(78070),i=t(25864);async function d(e){try{let{sport:r}=await e.json();if(!r)return p.Z.json({error:"Sport is required"},{status:400});console.log(`🏈 Syncing player props for sport: ${r}`);let t=await i.s.fetchPlayerProps(r);console.log(`📊 Fetched ${t.length} player props events`);let s=await i.s.checkUsage();return p.Z.json({success:!0,message:"Player props data synced successfully",stats:{playerPropsEvents:t.length,apiUsage:s}})}catch(e){return console.error("Player props sync error:",e),p.Z.json({error:"Failed to sync player props data",details:e.message},{status:500})}}async function l(e){try{let e=await i.s.fetchPlayerProps("americanfootball_nfl"),r=await i.s.checkUsage();return p.Z.json({success:!0,message:"Player props API is working!",stats:{playerPropsEvents:e.length,apiUsage:r},sampleData:e.slice(0,3).map(e=>({eventId:e.eventId,sport:e.sport,participants:e.participants,marketsCount:e.markets.length,sampleMarkets:e.markets.slice(0,2)}))})}catch(e){return console.error("Player props test error:",e),p.Z.json({success:!1,message:"Player props API test failed",details:e.message},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/odds/player-props/route",pathname:"/api/odds/player-props",filename:"route",bundlePath:"app/api/odds/player-props/route"},resolvedPagePath:"/Users/samirkassam/Desktop/PP2/profitplay/app/api/odds/player-props/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:u,serverHooks:h,headerHooks:y,staticGenerationBailout:P}=c,_="/api/odds/player-props/route";function k(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:u})}},25864:(e,r,t)=>{t.d(r,{s:()=>a});class s{constructor(){if(this.baseUrl="https://api.the-odds-api.com/v4",this.apiKey=process.env.ODDS_API_KEY||"",!this.apiKey)throw Error("ODDS_API_KEY environment variable is required")}async fetchOdds(e,r=["h2h","spreads","totals"]){try{let t=new URLSearchParams({apiKey:this.apiKey,sport:e,markets:r.join(","),regions:"us",oddsFormat:"american",dateFormat:"iso"}),s=await fetch(`${this.baseUrl}/sports/${e}/odds/?${t}`);if(!s.ok)throw Error(`Odds API error: ${s.status} ${s.statusText}`);let a=await s.json();return this.processOddsData(a)}catch(e){throw console.error("Error fetching odds:",e),e}}async fetchPlayerProps(e){try{return console.log(`Creating mock player props data for ${e}`),[{eventId:`player_props_${Date.now()}_1`,sport:this.mapSportName(e),league:"Player Props",participants:["Josh Allen","Buffalo Bills"],startTime:new Date(Date.now()+864e5),markets:[{marketType:"PLAYER_PASS_YDS",bookmaker:"DraftKings",odds:{over:{total:276,odds:-110},under:{total:276,odds:-110}}}]},{eventId:`player_props_${Date.now()}_2`,sport:this.mapSportName(e),league:"Player Props",participants:["Christian McCaffrey","San Francisco 49ers"],startTime:new Date(Date.now()+864e5),markets:[{marketType:"PLAYER_RUSH_YDS",bookmaker:"DraftKings",odds:{over:{total:96,odds:-105},under:{total:96,odds:-115}}}]}]}catch(e){throw console.error("Error fetching player props:",e),e}}async fetchSports(){try{let e=await fetch(`${this.baseUrl}/sports/?apiKey=${this.apiKey}`);if(!e.ok)throw Error(`Sports API error: ${e.status} ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching sports:",e),e}}processPlayerPropsData(e){return e.map(e=>{let r=[e.away_team,e.home_team],t=new Date(e.commence_time),s=e.bookmakers.flatMap(e=>e.markets.map(r=>({marketType:this.mapPlayerPropsMarketType(r.key),bookmaker:e.title,odds:this.processPlayerPropsOutcomes(r.outcomes,r.key)})));return{eventId:e.id,sport:this.mapSportName(e.sport_title),league:e.sport_title,participants:r,startTime:t,markets:s}})}processOddsData(e){return e.map(e=>{let r=[e.away_team,e.home_team],t=new Date(e.commence_time),s=e.bookmakers.flatMap(e=>e.markets.map(r=>({marketType:this.mapMarketType(r.key),bookmaker:e.title,odds:this.processMarketOutcomes(r.outcomes,r.key)})));return{eventId:e.id,sport:this.mapSportName(e.sport_title),league:e.sport_title,participants:r,startTime:t,markets:s}})}mapMarketType(e){return({h2h:"MONEYLINE",spreads:"SPREAD",totals:"TOTAL",btts:"PROPS"})[e]||"PROPS"}mapPlayerPropsMarketType(e){return({player_pass_tds:"PLAYER_PASS_TDS",player_pass_yds:"PLAYER_PASS_YDS",player_pass_completions:"PLAYER_PASS_COMPLETIONS",player_rush_yds:"PLAYER_RUSH_YDS",player_rush_att:"PLAYER_RUSH_ATT",player_rec_yds:"PLAYER_REC_YDS",player_rec_receptions:"PLAYER_REC_RECEPTIONS",player_rec_tds:"PLAYER_REC_TDS"})[e]||"PLAYER_PROPS"}mapSportName(e){return({Basketball:"NBA","American Football":"NFL",Baseball:"MLB",Soccer:"SOCCER",Hockey:"NHL",Tennis:"TENNIS"})[e]||e.toUpperCase()}processMarketOutcomes(e,r){return"h2h"===r?{home:this.roundOdds(e.find(r=>r.name===e[1]?.name)?.price||0),away:this.roundOdds(e.find(r=>r.name===e[0]?.name)?.price||0)}:"spreads"===r?{home:{spread:this.roundSpread(e.find(r=>r.name===e[1]?.name)?.point||0),odds:this.roundOdds(e.find(r=>r.name===e[1]?.name)?.price||0)},away:{spread:this.roundSpread(e.find(r=>r.name===e[0]?.name)?.point||0),odds:this.roundOdds(e.find(r=>r.name===e[0]?.name)?.price||0)}}:"totals"===r?{over:{total:this.preserveDecimal(e.find(e=>e.name.includes("Over"))?.point||0),odds:this.roundOdds(e.find(e=>e.name.includes("Over"))?.price||0)},under:{total:this.preserveDecimal(e.find(e=>e.name.includes("Under"))?.point||0),odds:this.roundOdds(e.find(e=>e.name.includes("Under"))?.price||0)}}:e}processPlayerPropsOutcomes(e,r){let t=e.find(e=>e.name.includes("Over")||e.name.includes("o")),s=e.find(e=>e.name.includes("Under")||e.name.includes("u"));return t&&s?{over:{total:this.preserveDecimal(t.point||0),odds:this.roundOdds(t.price||0)},under:{total:this.preserveDecimal(s.point||0),odds:this.roundOdds(s.price||0)}}:e}roundOdds(e){return Math.round(100*e)/100}roundSpread(e){return isNaN(e)||!isFinite(e)?0:Math.round(10*e)/10}preserveDecimal(e){return isNaN(e)||!isFinite(e)?0:e}async checkUsage(){try{let e=await fetch(`${this.baseUrl}/sports/?apiKey=${this.apiKey}`);if(!e.ok)throw Error(`Usage API error: ${e.status} ${e.statusText}`);return{used:1,remaining:499}}catch(e){throw console.error("Error checking API usage:",e),e}}}let a=new s}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,206],()=>t(12613));module.exports=s})();