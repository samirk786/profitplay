"use strict";(()=>{var e={};e.id=821,e.ids=[821],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3167:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>P,patchFetch:()=>_,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>u,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>y});var s={};r.r(s),r.d(s,{GET:()=>p});var a=r(95419),o=r(69108),n=r(99678),i=r(78070),d=r(25864);async function p(e){try{console.log("\uD83E\uDDEA Testing Odds API integration...");let e=await d.s.fetchSports();console.log(`✅ Fetched ${e.length} sports`);let t=null;try{t=await d.s.fetchOdds("basketball_nba"),console.log(`✅ Fetched ${t.length} NBA events`)}catch(e){console.log("⚠️ No NBA odds available right now (this is normal)")}let r=await d.s.checkUsage();return i.Z.json({success:!0,message:"Odds API integration is working!",stats:{sportsAvailable:e.length,nbaEvents:t?.length||0,apiUsage:r},sampleSports:e.slice(0,5).map(e=>({key:e.key,title:e.title}))})}catch(e){return console.error("❌ Odds API test failed:",e),i.Z.json({success:!1,error:"Odds API test failed",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/odds/test/route",pathname:"/api/odds/test",filename:"route",bundlePath:"app/api/odds/test/route"},resolvedPagePath:"/Users/samirkassam/Desktop/PP2/profitplay/app/api/odds/test/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:u,headerHooks:h,staticGenerationBailout:y}=l,P="/api/odds/test/route";function _(){return(0,n.patchFetch)({serverHooks:u,staticGenerationAsyncStorage:m})}},25864:(e,t,r)=>{r.d(t,{s:()=>a});class s{constructor(){if(this.baseUrl="https://api.the-odds-api.com/v4",this.apiKey=process.env.ODDS_API_KEY||"",!this.apiKey)throw Error("ODDS_API_KEY environment variable is required")}async fetchOdds(e,t=["h2h","spreads","totals"]){try{let r=new URLSearchParams({apiKey:this.apiKey,sport:e,markets:t.join(","),regions:"us",oddsFormat:"american",dateFormat:"iso"}),s=await fetch(`${this.baseUrl}/sports/${e}/odds/?${r}`);if(!s.ok)throw Error(`Odds API error: ${s.status} ${s.statusText}`);let a=await s.json();return this.processOddsData(a)}catch(e){throw console.error("Error fetching odds:",e),e}}async fetchPlayerProps(e){try{return console.log(`Creating mock player props data for ${e}`),[{eventId:`player_props_${Date.now()}_1`,sport:this.mapSportName(e),league:"Player Props",participants:["Josh Allen","Buffalo Bills"],startTime:new Date(Date.now()+864e5),markets:[{marketType:"PLAYER_PASS_YDS",bookmaker:"DraftKings",odds:{over:{total:276,odds:-110},under:{total:276,odds:-110}}}]},{eventId:`player_props_${Date.now()}_2`,sport:this.mapSportName(e),league:"Player Props",participants:["Christian McCaffrey","San Francisco 49ers"],startTime:new Date(Date.now()+864e5),markets:[{marketType:"PLAYER_RUSH_YDS",bookmaker:"DraftKings",odds:{over:{total:96,odds:-105},under:{total:96,odds:-115}}}]}]}catch(e){throw console.error("Error fetching player props:",e),e}}async fetchSports(){try{let e=await fetch(`${this.baseUrl}/sports/?apiKey=${this.apiKey}`);if(!e.ok)throw Error(`Sports API error: ${e.status} ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching sports:",e),e}}processPlayerPropsData(e){return e.map(e=>{let t=[e.away_team,e.home_team],r=new Date(e.commence_time),s=e.bookmakers.flatMap(e=>e.markets.map(t=>({marketType:this.mapPlayerPropsMarketType(t.key),bookmaker:e.title,odds:this.processPlayerPropsOutcomes(t.outcomes,t.key)})));return{eventId:e.id,sport:this.mapSportName(e.sport_title),league:e.sport_title,participants:t,startTime:r,markets:s}})}processOddsData(e){return e.map(e=>{let t=[e.away_team,e.home_team],r=new Date(e.commence_time),s=e.bookmakers.flatMap(e=>e.markets.map(t=>({marketType:this.mapMarketType(t.key),bookmaker:e.title,odds:this.processMarketOutcomes(t.outcomes,t.key)})));return{eventId:e.id,sport:this.mapSportName(e.sport_title),league:e.sport_title,participants:t,startTime:r,markets:s}})}mapMarketType(e){return({h2h:"MONEYLINE",spreads:"SPREAD",totals:"TOTAL",btts:"PROPS"})[e]||"PROPS"}mapPlayerPropsMarketType(e){return({player_pass_tds:"PLAYER_PASS_TDS",player_pass_yds:"PLAYER_PASS_YDS",player_pass_completions:"PLAYER_PASS_COMPLETIONS",player_rush_yds:"PLAYER_RUSH_YDS",player_rush_att:"PLAYER_RUSH_ATT",player_rec_yds:"PLAYER_REC_YDS",player_rec_receptions:"PLAYER_REC_RECEPTIONS",player_rec_tds:"PLAYER_REC_TDS"})[e]||"PLAYER_PROPS"}mapSportName(e){return({Basketball:"NBA","American Football":"NFL",Baseball:"MLB",Soccer:"SOCCER",Hockey:"NHL",Tennis:"TENNIS"})[e]||e.toUpperCase()}processMarketOutcomes(e,t){return"h2h"===t?{home:this.roundOdds(e.find(t=>t.name===e[1]?.name)?.price||0),away:this.roundOdds(e.find(t=>t.name===e[0]?.name)?.price||0)}:"spreads"===t?{home:{spread:this.roundSpread(e.find(t=>t.name===e[1]?.name)?.point||0),odds:this.roundOdds(e.find(t=>t.name===e[1]?.name)?.price||0)},away:{spread:this.roundSpread(e.find(t=>t.name===e[0]?.name)?.point||0),odds:this.roundOdds(e.find(t=>t.name===e[0]?.name)?.price||0)}}:"totals"===t?{over:{total:this.preserveDecimal(e.find(e=>e.name.includes("Over"))?.point||0),odds:this.roundOdds(e.find(e=>e.name.includes("Over"))?.price||0)},under:{total:this.preserveDecimal(e.find(e=>e.name.includes("Under"))?.point||0),odds:this.roundOdds(e.find(e=>e.name.includes("Under"))?.price||0)}}:e}processPlayerPropsOutcomes(e,t){let r=e.find(e=>e.name.includes("Over")||e.name.includes("o")),s=e.find(e=>e.name.includes("Under")||e.name.includes("u"));return r&&s?{over:{total:this.preserveDecimal(r.point||0),odds:this.roundOdds(r.price||0)},under:{total:this.preserveDecimal(s.point||0),odds:this.roundOdds(s.price||0)}}:e}roundOdds(e){return Math.round(100*e)/100}roundSpread(e){return isNaN(e)||!isFinite(e)?0:Math.round(10*e)/10}preserveDecimal(e){return isNaN(e)||!isFinite(e)?0:e}async checkUsage(){try{let e=await fetch(`${this.baseUrl}/sports/?apiKey=${this.apiKey}`);if(!e.ok)throw Error(`Usage API error: ${e.status} ${e.statusText}`);return{used:1,remaining:499}}catch(e){throw console.error("Error checking API usage:",e),e}}}let a=new s}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206],()=>r(3167));module.exports=s})();